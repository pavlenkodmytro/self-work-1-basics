"""
Завдання 2: Розрахунок значення Z за математичною формулою

Програма обчислює значення виразу Z за формулою:
Z = (9πt + 10) / √(t - |x|)

де:
- x - остання цифра номера за списком (вводиться користувачем)
- t - константа, що дорівнює 1
- π - число Пі (3.14159...)
- √ - квадратний корінь
- |x| - абсолютне значення (модуль) числа x
"""

import math


def calculate_z(x_value, t_value=1):
    """
    Обчислює значення Z за формулою: Z = (9πt + 10) / √(t - |x|)

    Формула складається з:
    - Чисельник: 9πt + 10
      - 9 множимо на π (число Пі)
      - Результат множимо на t
      - Додаємо 10
    - Знаменник: √(t - |x|)
      - Обчислюємо абсолютне значення x
      - Віднімаємо його від t
      - Обчислюємо квадратний корінь

    Args:
        x_value (float): Значення x (остання цифра номера за списком)
        t_value (float): Значення t (за замовчуванням = 1)

    Returns:
        float: Обчислене значення Z

    Raises:
        ValueError: Якщо знаменник від'ємний або дорівнює нулю

    Example:
        >>> calculate_z(x_value=5, t_value=1)
        # Чисельник: 9 × π × 1 + 10 = 9π + 10 ≈ 38.27
        # Знаменник: √(1 - |5|) = √(1 - 5) = √(-4) → помилка!

        >>> calculate_z(x_value=0, t_value=1)
        # Чисельник: 9 × π × 1 + 10 = 9π + 10 ≈ 38.27
        # Знаменник: √(1 - |0|) = √1 = 1
        # Z = 38.27 / 1 = 38.27
    """
    # Крок 1: Обчислюємо чисельник формули
    # Чисельник = 9πt + 10

    # math.pi - це вбудована константа Python для числа Пі (≈ 3.14159)
    numerator = 9 * math.pi * t_value + 10

    print(f"Крок 1: Обчислення чисельника")
    print(f"  Чисельник = 9 × π × {t_value} + 10")
    print(f"  Чисельник = 9 × {math.pi:.5f} × {t_value} + 10")
    print(f"  Чисельник = {numerator:.5f}")
    print()

    # Крок 2: Обчислюємо знаменник формули
    # Знаменник = √(t - |x|)

    # abs(x_value) - вбудована функція Python для обчислення абсолютного значення
    absolute_x = abs(x_value)

    print(f"Крок 2: Обчислення знаменника")
    print(f"  |x| = |{x_value}| = {absolute_x}")

    # Обчислюємо вираз під коренем
    under_root = t_value - absolute_x
    print(f"  Вираз під коренем: t - |x| = {t_value} - {absolute_x} = {under_root}")

    # Перевірка: під коренем має бути додатнє число
    if under_root <= 0:
        raise ValueError(
            f"Помилка! Неможливо обчислити квадратний корінь з від'ємного числа або нуля.\n"
            f"Вираз під коренем: {under_root}\n"
            f"Для коректного розрахунку має виконуватись умова: t > |x|"
        )

    # math.sqrt() - функція для обчислення квадратного кореня
    denominator = math.sqrt(under_root)
    print(f"  Знаменник = √{under_root} = {denominator:.5f}")
    print()

    # Крок 3: Обчислюємо фінальне значення Z
    # Z = Чисельник / Знаменник
    z_result = numerator / denominator

    print(f"Крок 3: Обчислення Z")
    print(f"  Z = Чисельник / Знаменник")
    print(f"  Z = {numerator:.5f} / {denominator:.5f}")
    print(f"  Z = {z_result:.5f}")

    return z_result


def run_calculation():
    """
    Головна функція для запуску програми розрахунку Z.

    Послідовно:
    1. Запитує у користувача останню цифру номера за списком (x)
    2. Викликає функцію calculate_z() для обчислення результату
    3. Виводить фінальний результат або повідомлення про помилку
    """
    print("=" * 70)
    print("РОЗРАХУНОК ЗНАЧЕННЯ Z ЗА ФОРМУЛОЮ")
    print("=" * 70)
    print()
    print("Формула: Z = (9πt + 10) / √(t - |x|)")
    print("де t = 1, x - остання цифра номера за списком")
    print()
    print("=" * 70)
    print()

    try:
        # Запитуємо у користувача останню цифру номера за списком
        x_input = float(input("Введіть останню цифру вашого номера за списком (x): "))

        # Константа t завжди дорівнює 1 за умовою завдання
        t_constant = 1

        print()
        print("=" * 70)
        print("ПОКРОКОВЕ ОБЧИСЛЕННЯ")
        print("=" * 70)
        print()

        # Викликаємо функцію розрахунку
        result = calculate_z(x_value=x_input, t_value=t_constant)

        # Виводимо фінальний результат
        print()
        print("=" * 70)
        print("РЕЗУЛЬТАТ")
        print("=" * 70)
        print(f"Значення Z = {result:.5f}")
        print("=" * 70)

    except ValueError as error:
        # Обробка помилки (наприклад, корінь з від'ємного числа)
        print()
        print("=" * 70)
        print("ПОМИЛКА РОЗРАХУНКУ")
        print("=" * 70)
        print(str(error))
        print("=" * 70)

    except Exception as error:
        # Обробка інших несподіваних помилок
        print()
        print("=" * 70)
        print("НЕСПОДІВАНА ПОМИЛКА")
        print("=" * 70)
        print(f"Виникла помилка: {str(error)}")
        print("=" * 70)


# Точка входу в програму
# Цей блок виконається тільки якщо файл запущено безпосередньо
if __name__ == "__main__":
    run_calculation()
